name: github.com/getoutreach/stencil-golang
###Block(keys)
modules:
  - name: github.com/getoutreach/stencil-discovery
arguments:
  service:
    type: bool
    description: Whether or not this application is a runnable service. This flag provides the service activity interface and everything necessary for releasing and deploying a service.
  serviceActivities:
    type: list
    description: Any valid built-in service activities can be supplied here and they will be provided. The `service` flag must be set to true. Valid values for this are `http`, `grpc`, `temporal`, and `kafka`.
  oss:
    type: bool
    description: Deprecated, denotes this is an open source repository.
    deprecated: true
  commands:
    type: list
    description: List of CLI commands to generate for this repository
  grpcClients:
    type: list
    description: List of grpc clients to generate for this gRPC service. Type must include gRPC
  reportingTeam:
    type: string
  kubernetes.groups:
    type: list
    description: List of Kubernetes groups to generate
  lintroller:
    type: string
    description: lintroller level to apply to this repository
    default: platinum
  metrics:
    schema:
      type: string
      enum:
        - datadog
        - opentelemetry
    description: Metrics collector to use (supports opentelemetry and datadog)
    default: datadog
  tracing:
    schema:
      type: string
    descriptions: Tracing backend to send traces to (support opentelemetry and honeycomb)
    default: honeycomb
  slack:
    schema:
      type: string
    description: Slack channel to send deployment messages into.
  vaultSecrets:
    type: list
    description: List of secrets to consume from Vault, if Vault is enabled in the box config
  mixins:
    type: list
    description: "Deprecated: List of mixins to also import. Set in override.jsonnet instead"
  skipResourcesCheck:
    type: bool
    description: Whether or not to check for resources related to `serviceActivities`.
    deprecated: true
  resources.kafka:
    type: string
    description: Kafka version to use in github.com/getoutreach/stencil-circleci (used to check resources related to `serviceActivities`).
    deprecated: true
  dependencies.optional:
    type: list
    description: Dependencies your repository needs, but not always (e.g. E2E tests).
  dependencies.required:
    type: list
    description: Dependencies your repository requires to run successfully no matter what.
  terraform.datadog.grpc.tags:
    schema:
      type: array
    description: Filter metrics used to create monitors and alerts in Datadog for gRPC related events.
  terraform.datadog.grpc.evaluationWindow:
    schema:
      type: string
    description: The window of time to evaluate metrics related to gRPC events for each monitor and alert.
  terraform.datadog.grpc.lowTrafficCountThreshold:
    schema:
      type: integer
    description: Overrides the low count threshold in the "grpc_latency_high" & "grpc_success_rate_low" terraform modules in monitoring/datadog.tf.
  terraform.datadog.grpc.latency.percentiles.lowTraffic:
    schema:
      type: integer
    description: Overrides the low traffic percentile in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.grpc.latency.percentiles.highTraffic:
    schema:
      type: integer
    description: Overrides the high traffic percentile in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.grpc.latency.thresholds.lowTraffic:
    schema:
      type: integer
    description: Overrides the low traffic threshold in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.grpc.latency.thresholds.highTraffic:
    schema:
      type: integer
    description: Overrides the high traffic threshold in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.grpc.qos.thresholds.lowTraffic:
    schema:
      type: integer
    description: Overrides the low traffic threshold in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.grpc.qos.thresholds.highTraffic:
    schema:
      type: integer
    description: Overrides the high traffic threshold in the "grpc_latency_high" terraform module in monitoring/datadog.tf.
  terraform.datadog.http.evaluationWindow:
    schema:
      type: string
    description: The window of time to evaluate metrics related to HTTP events for each monitor and alert.
  terraform.datadog.http.percentiles.lowTraffic:
    schema:
      type: integer
    description: Overrides the low traffic percentile in the "http_success_rate_low" terraform module in monitoring/datadog.tf.
  terraform.datadog.http.percentiles.highTraffic:
    schema:
      type: integer
    description: Overrides the high traffic percentile in the "http_success_rate_low" terraform module in monitoring/datadog.tf.
  terraform.datadog.http.thresholds.lowCount:
    schema:
      type: integer
    description: Overrides the low count threshold in the "http_success_rate_low" terraform module in monitoring/datadog.tf.
  terraform.datadog.http.thresholds.lowTraffic:
    schema:
      type: integer
    description: Overrides the low traffic threshold in the "http_success_rate_low" terraform module in monitoring/datadog.tf.
  terraform.datadog.http.thresholds.highTraffic:
    schema:
      type: integer
    description: Overrides the high traffic threshold in the "http_success_rate_low" terraform module in monitoring/datadog.tf.
  terraform.datadog.pods.thresholds.availableLowCount:
    schema:
      type: integer
    description: Overrides the min available replica count in the "available_pods_low" alert in terraform module in monitoring/datadog.tf.
  deployTo.serviceDomain:
    description: The service domain that the service is needs deployed to.
    schema:
      type: string
      enum:
        - bento
        - shared-service
  deployTo.environments:
    description: A list of environments that the service is deployed to.
    schema:
      type: array
      items:
        type: string
        enum:
          - ops
          - staging
          - production
###EndBlock(keys)
