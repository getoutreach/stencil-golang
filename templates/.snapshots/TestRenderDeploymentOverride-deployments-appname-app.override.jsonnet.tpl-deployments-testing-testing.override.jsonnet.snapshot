(*codegen.File)(// Copyright 2022 Outreach Corporation. All Rights Reserved.
//
// Description: This file is automatically merged into the 'testing.jsonnet' file.
// Configuration should go into the 'testing.config.jsonnet' file, or in the relevant
// file in the configs/ directory.
//
// Managed: true

local ok = import 'kubernetes/outreach.libsonnet';
local app = (import 'kubernetes/app.libsonnet').info('testing');
local isDev = (app.environment == 'development' || app.environment == 'local_development');

// Put custom global variables here
///Block(globalVars)

///EndBlock(globalVars)

// Objects contains kubernetes objects (or resources) that should be created in
// all environments.
local objects = {
	///Block(override)

	///EndBlock(override)
};

// dev_objects contains kubernetes objects (or resources) that should be created
// ONLY in a development environment. This includes the E2E environment.
local dev_objects = {
	///Block(devoverride)

	///EndBlock(devoverride)
};

// overrideMixins contains a list of files to include as mixins into
// the override file.
local overrideMixins = [
	///Block(overrideMixins)

	///EndBlock(overrideMixins)
];

local mergedOverrideMixins = std.foldl(function(x, y) (x + y), overrideMixins, {});
mergedOverrideMixins + objects + (if isDev then dev_objects else {})
)
